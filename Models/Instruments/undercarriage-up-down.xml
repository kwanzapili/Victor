<?xml version="1.0"?>

<PropertyList>
    <path>undercarriage-up-down.ac</path>

    <animation>
	<name>Collection1</name>
	<object-name>up-button</object-name>
	<object-name>up-guard</object-name>
    </animation>

    <animation>
	<name>Collection2</name>
	<object-name>hinge_pin</object-name>
	<object-name>up-lamp</object-name>
    </animation>

    <animation>
	<name>Collection3</name>
	<object-name>down-button</object-name>
	<object-name>down-button-front</object-name>
    </animation>

    <animation>
	<type>rotate</type>
	<object-name>up-guard</object-name>
	<property>/controls/gear/gear-guard</property>
	<factor>-80</factor>
	<offset>180</offset>
	<center>
	    <x-m> 0.0212157</x-m>
	    <y-m>-0.00810573</y-m>
	    <z-m> 0.0246744</z-m>
	</center>
	<axis>
	    <x> 0</x>
	    <y> 0</y>
	    <z>-1</z>
	</axis>
    </animation>

    <animation>
	<type>pick</type>
	<object-name>up-guard</object-name>
	<visible>true</visible>
	<action>
	    <button>0</button>
	    <repeatable>false</repeatable>
	    <binding>
		<command>switch-toggle</command>
		<property>/controls/gear/gear-guard</property>
	    </binding>
	</action>
	<hovered>
	    <binding>
		<command>set-tooltip</command>
		<label>Gear-up guard: %s</label>
		<mapping>open-close</mapping>
		<property>/controls/gear/gear-guard</property>
		<tooltip-id>gear_guard</tooltip-id>
	    </binding>
	</hovered>
    </animation>

    <animation>
	<type>translate</type>
	<object-name>up-button</object-name>
	<object-name>up-lamp</object-name>
	<property>/controls/gear/gear-down</property>
	<interpolation>
	    <entry><ind>0</ind><dep>0.002</dep></entry>
	    <entry><ind>1</ind><dep>0</dep></entry>
	</interpolation>
	<axis>
	    <x>-1</x>
	    <y> 0</y>
	    <z> 0</z>
	</axis>  
    </animation>

    <animation>
	<type>pick</type>
	<object-name>up-button</object-name>
	<object-name>up-lamp</object-name>
	<visible>true</visible>
	<condition>
	    <not>
		<property>/controls/gear/gear-locked</property>
	    </not>
	</condition>
	<action>
	    <button>0</button>
	    <repeatable>false</repeatable>
	    <binding>
		<command>nasal</command>
		<script>controls.gearDown(-1.0);</script>
	    </binding>
	</action>
	<hovered>
	    <binding>
		<command>set-tooltip</command>
		<label>Gear-up: %s</label>
		<mapping>down-up</mapping>
		<property>/controls/gear/gear-down</property>
		<tooltip-id>gear_up</tooltip-id>
	    </binding>
	</hovered>
    </animation>

    <animation>
	<object-name>up-lamp</object-name>
	<type>material</type>
	<condition>
	    <equals>
		<property>gear/gear[0]/position-norm</property>
		<value>1</value>
	    </equals>
	</condition>

	<emission>
	    <red>   0.0357</red>
	    <green> 0.0   </green>
	    <blue>  0.0   </blue>
	</emission>
	<ambient>
	    <red>   1.0 </red>
	    <green> 0.0 </green>
	    <blue>  0.0 </blue>
	</ambient>

    </animation>

    <!-- **************** gear-down **************** -->
    <animation>
	<type>translate</type>
	<object-name>down-button</object-name>
	<object-name>down-button-front</object-name>
	<property>/controls/gear/gear-down</property>
	<interpolation>
	    <entry><ind>0</ind><dep>0.002</dep></entry>
	    <entry><ind>1</ind><dep>0</dep></entry>
	</interpolation>
	<axis>
	    <x>1</x>
	    <y>0</y>
	    <z>0</z>
	</axis>
    </animation>

    <animation>
	<condition>
	    <greater-than>
		<property>/gear/gear[0]/position-norm</property>
		<value>0.5</value>
	    </greater-than>
	</condition>

	<type>material</type>
	<object-name>down-button-front</object-name>
	<emission>
	    <factor-prop>/gear/gear[0]/position-norm</factor-prop>
	    <red>   0.0 </red>
	    <green> 1.0 </green>
	    <blue>  0.0 </blue>
	</emission>
	<ambient>
	    <factor-prop>/gear/gear[0]/position-norm</factor-prop>
	    <red>   0.0  </red>
	    <green> 1.0 </green>
	    <blue>  0.0 </blue>
	</ambient>
    </animation>

    <animation>
	<type>pick</type>
	<object-name>down-button</object-name>
	<visible>true</visible>
	<!-- condition>
	    <not>
	    <property>/controls/gear/gear-locked</property>
	    </not>
	</condition -->
	<action>
	    <button>0</button>
	    <repeatable>false</repeatable>
	    <binding>
		<command>nasal</command>
		<script>controls.gearDown(1);</script>
	    </binding>
	</action>
	<hovered>
	    <binding>
		<command>set-tooltip</command>
		<label>Gear-down: %s</label>
		<mapping>down-up</mapping>
		<property>/controls/gear/gear-down</property>
		<tooltip-id>gear_down</tooltip-id>
	    </binding>
	</hovered>
    </animation>

    <!-- Panel Lighting -->
    <animation include="Models/Instruments/Lighting/switch-shiny.xml">
	<object-name>Collection1</object-name>
    </animation>

    <animation include="Models/Instruments/Lighting/base-normal.xml">
	<object-name>Collection2</object-name>
    </animation>

    <!-- *** LoD *** -->
    <animation>
	<type>range</type>
	<min-m>0</min-m>
	<max-m>5</max-m>
    </animation>

    <effect>
	<inherits-from>Effects/model-combined-deferred</inherits-from>
	<parameters>
	    <lightmap-enabled type="int">1</lightmap-enabled>
	    <lightmap-factor type="float" n="0">0.6</lightmap-factor>
	    <lightmap-factor type="float" n="1">0.6</lightmap-factor>
	    <lightmap-factor type="float" n="2">0.5</lightmap-factor>
	    <reflection-enabled type="int">1</reflection-enabled>
	    <ambient-correction type="float">0.15</ambient-correction>
	</parameters>
	<object-name>down-button</object-name>
	<object-name>up-button</object-name>
	<object-name>up-guard</object-name>
	<object-name>down-button-front</object-name>
	<object-name>hinge_pin</object-name>
	<object-name>up-lamp</object-name>
    </effect>

</PropertyList>
